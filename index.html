<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Comprobante Hola NequiBotGV</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    body {
      background: #f9f9fb;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      font-family: 'Manrope', Arial, sans-serif;
      margin: 0;
    }
    .comprobante-container {
      position: relative;
      width: 350px;
      max-width: 97vw;
      margin: 30px auto;
    }
    .comprobante-img {
      width: 100%;
      display: block;
      border-radius: 16px;
      box-shadow: 0 4px 20px #0001;
    }
    .texto-saludo {
      position: absolute;
      top: 42%;
      left: 0;
      width: 100%;
      text-align: center;
      font-size: 2em;
      font-weight: bold;
      color: #3C114B;
      text-shadow: 0 2px 8px #fff, 0 1px 1px #fff;
      letter-spacing: 1px;
      pointer-events: none;
    }
    .botones {
      display: flex;
      gap: 14px;
      margin-top: 28px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .boton {
      padding: 14px 34px;
      font-size: 18px;
      color: #fff;
      background: #3C114B;
      border: none;
      border-radius: 10px;
      box-shadow: 0 2px 12px #3c114b44;
      cursor: pointer;
      font-family: inherit;
      font-weight: 700;
      transition: background 0.2s;
      margin-bottom: 10px;
    }
    .boton:active {
      background: #661199;
    }
  </style>
</head>
<body>
  <div class="comprobante-container" id="comprobante">
    <img src="comprobante_base.png" alt="Comprobante" class="comprobante-img">
    <div class="texto-saludo">Hola</div>
  </div>
  <div class="botones">
    <button class="boton" onclick="descargarComprobante()">Descargar</button>
    <button class="boton" onclick="compartirComprobante()">Compartir</button>
  </div>
  <script>
    function descargarComprobante() {
      const comprobante = document.getElementById("comprobante");
      html2canvas(comprobante, {
        useCORS: true,
        scale: 3
      }).then(canvas => {
        const link = document.createElement('a');
        link.download = 'comprobante-hola.png';
        link.href = canvas.toDataURL();
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        alert("Comprobante guardado en Descargas o Galería.");
      });
    }

    async function compartirComprobante() {
      const comprobante = document.getElementById("comprobante");
      html2canvas(comprobante, {
        useCORS: true,
        scale: 4 // Máxima calidad para compartir
      }).then(async (canvas) => {
        canvas.toBlob(async function(blob) {
          const file = new File([blob], "comprobante-hola.png", { type: "image/png" });
          if (navigator.canShare && navigator.canShare({ files: [file] })) {
            try {
              await navigator.share({
                title: "Comprobante NequiBotGV",
                text: "Aquí tienes tu comprobante generado en HD.",
                files: [file],
              });
            } catch (err) {
              alert("Compartir cancelado o fallido.");
            }
          } else {
            // Si no soporta compartir archivos, muestra solo la imagen o descarga
            alert("La función de compartir directo no está disponible en tu dispositivo. Descarga la imagen y compártela manualmente.");
          }
        }, "image/png", 1);
      });
    }
  </script>
</body>
</html>
